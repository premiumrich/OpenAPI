<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Trulioo Ruby SDK Sample App</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/railscasts.min.css">
  <link rel="stylesheet" href="/styles.css">
</head>

<body>
  <header>
    <h1>Trulioo Ruby SDK Sample Application</h1>
    <p class="header-description">This is a sample application that utilizes the
      <a href="https://github.com/Trulioo/sdk-ruby" target="_blank" rel="noreferrer">Trulioo Ruby SDK</a>.
      Please visit the SDK respository for documentation on installation, usage, and supported methods.
      <br><br>
      Input your x-trulioo-api-key into line 4 of app.rb
    </p>
  </header>

  <hr>

  <div>
    <h2 class="product-heading">Identity Verification Steps</h2>

    <!-- Test Authentication -->
    <section>
      <div class="section-header">
        <span class="section-number">1</span>
        <h3 class="section-title">Authentication</h3>
      </div>
      <p class="section-description">
        You can use this method to check whether your API key is working. The only thing you need to provide is a
        mode: "trial" or "live".
      </p>
      <article class="codeblock">
        <div class="codeblock-header">
          <span class="codeblock-header-title">Method</span>
          <button type="submit" id="test-authentication" class="codeblock-header-button">▶ Run</button>
        </div>
        <div class="codeblock-content">
          <pre style="white-space: nowrap;"><code class="lang-ruby">
            mode = "trial"
            <br><br>
            result = Trulioo::ConnectionApi.new().test_authentication(mode)
          </code></pre>
        </div>
        <div class="codeblock-header">
          <span class="codeblock-header-title">Response</span>
        </div>
        <div class="codeblock-content">
          <pre><code class="lang-ruby" id="test-authentication-response"></code></pre>
        </div>
      </article>
    </section>

    <!-- Get Countries -->
    <section>
      <div class="section-header">
        <span class="section-number">2</span>
        <h3 class="section-title">Countries</h3>
      </div>
      <p class="section-description">
        Trulioo's API is structured to make calls by country. If you're not sure what countries are configured for your
        account, Trulioo provides this method to retrieve this information at any time. Simply run the following to
        receive the full list of country codes available for your account.
      </p>
      <article class="codeblock">
        <div class="codeblock-header">
          <span class="codeblock-header-title">Method</span>
          <button type="submit" id="get-countries" class="codeblock-header-button">▶ Run</button>
        </div>
        <div class="codeblock-content">
          <pre style="white-space: nowrap;"><code class="lang-ruby">
            mode = "trial"
            <br>
            configuration_name = "Identity Verification"
            <br><br>
            result = Trulioo::ConfigurationApi.new().get_country_codes(mode, configuration_name)
          </code></pre>
        </div>
        <div class="codeblock-header">
          <span class="codeblock-header-title">Response</span>
        </div>
        <div class="codeblock-content">
          <pre><code class="lang-ruby" id="get-countries-response"></code></pre>
        </div>
      </article>
    </section>

    <!-- Get Test Entities -->
    <section>
      <div class="section-header">
        <span class="section-number">3</span>
        <h3 class="section-title">Test Entities</h3>
      </div>
      <p class="section-description">
        Now that you know what country codes are valid for your account, you can see what test entities exist for each
        of these countries.
        <br>
        These test entities can be used to test verification in step 5. They only serve as demo data, and different ones
        exist for every country.
      </p>
      <article class="codeblock">
        <div class="codeblock-header">
          <span class="codeblock-header-title">Method</span>
          <button type="submit" id="get-test-entities" class="codeblock-header-button">▶ Run</button>
        </div>
        <div class="codeblock-content">
          <pre style="white-space: nowrap;"><code class="lang-ruby">
            mode = "trial"
            <br>
            configuration_name = "Identity Verification"
            <br>
            country_code = "US"
            <br><br>
            result = Trulioo::ConfigurationApi.new().get_test_entities(mode, configuration_name, country_code)
          </code></pre>
        </div>
        <div class="codeblock-header">
          <span class="codeblock-header-title">Response</span>
        </div>
        <div class="codeblock-content">
          <pre><code class="lang-ruby" id="get-test-entities-response"></code></pre>
        </div>
      </article>
    </section>

    <!-- Get Consents -->
    <section>
      <div class="section-header">
        <span class="section-number">4</span>
        <h3 class="section-title">Consents</h3>
      </div>
      <p class="section-description">
        It is the responsibility of the developer to ensure any necessary consents are being collected from the
        individual being verified. See
        <a href="https://gateway-admin.trulioo.com/termsandconditions" target="_blank" rel="noreferrer">
          Trulioo's Terms and Conditions</a>.
        <br><br>
        Due to the nature of some of our data sources, you may need to obtain consent from your customer for their data
        to be sent to that particular source. You may or may not be configured to use any of these data sources, so it
        is recommended to run this method for all of the countries obtained in step 2. This will give you a list of
        data sources that require additional consents in each country. If applicable, you can obtain these special
        consents from your customer, and then provide them in the consent_for_data_sources property of the verify
        request.
      </p>
      <article class="codeblock">
        <div class="codeblock-header">
          <span class="codeblock-header-title">Method</span>
          <button type="submit" id="get-consents" class="codeblock-header-button">▶ Run</button>
        </div>
        <div class="codeblock-content">
          <pre style="white-space: nowrap;"><code class="lang-ruby">
            mode = "trial"
            <br>
            configuration_name = "Identity Verification"
            <br>
            country_code = "US"
            <br><br>
            result = Trulioo::ConfigurationApi.new().getConsents(mode, configuration_name, country_code)
          </code></pre>
        </div>
        <div class="codeblock-header">
          <span class="codeblock-header-title">Response</span>
        </div>
        <div class="codeblock-content">
          <pre><code class="lang-ruby" id="get-consents-response"></code></pre>
        </div>
      </article>
    </section>

    <!-- Verify -->
    <section>
      <div class="section-header">
        <span class="section-number">5</span>
        <h3 class="section-title">Verify</h3>
      </div>
      <p class="section-description">
        Once steps 1 through 4 have been completed, you should have everything needed to carry out a verify request.
        Using one of the country codes from step 2, one of the test entities from step 3, and any necessary consents
        from step 4, you can now run the following request.
      </p>
      <br>
      <h4>Explanation of additional fields:</h4>
      <br>
      <p class="section-description">
        accept_trulioo_terms_and_conditions (Boolean): This flag indicates that you accept Trulioo's Terms and
        Conditions. The verification request will be executed only if the value of this property is passed as true.
        <br><br>
        cleansed_address (Boolean): Trulioo provides a service to check address data and ensure it is correct and all
        necessary address fields are provided. In general, these cleansed addresses have a higher likelihood of
        producing a match result. Set this property to true to receive address cleanse information.
        <br><br>
        configuration_name (String): When verifying an identity, this should be set to "Identity Verification".
      </p>
      <article class="codeblock">
        <div class="codeblock-header">
          <span class="codeblock-header-title">Method</span>
          <button type="submit" id="verify" class="codeblock-header-button">▶ Run</button>
        </div>
        <div class="codeblock-content">
          <pre style="white-space: nowrap;"><code class="lang-ruby">
            mode = "trial"
            <br>
            verify_request = Trulioo::VerifyRequest.new() # Initialize with appropriate data
            <br><br>
            result = Trulioo::VerificationsApi.new().verify(mode, verify_request)
          </code></pre>
        </div>
        <div class="codeblock-header">
          <span class="codeblock-header-title">Response</span>
        </div>
        <div class="codeblock-content">
          <pre><code class="lang-ruby" id="verify-response"></code></pre>
        </div>
      </article>
    </section>
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.6.0/highlight.min.js"></script>
  <script src="/index.js"></script>
</body>

</html>
